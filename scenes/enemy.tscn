[gd_scene load_steps=17 format=3 uid="uid://8rr4wmc0oh07"]

[ext_resource type="Script" uid="uid://drly54iw3ik4e" path="res://Scripts/enemy.gd" id="1_5uy6h"]
[ext_resource type="Texture2D" uid="uid://wdhv7wy0t8w4" path="res://Art/demon1attack.png" id="2_c4w8v"]
[ext_resource type="Texture2D" uid="uid://cy5iu1q08k1xn" path="res://Art/demon1walk.png" id="3_xwavj"]
[ext_resource type="Script" uid="uid://bncw578wlukui" path="res://Scripts/enemy_punch_range.gd" id="4_nenq2"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_uu6xs"]
radius = 0.16455078
height = 0.6332245

[sub_resource type="AtlasTexture" id="AtlasTexture_20pc6"]
atlas = ExtResource("2_c4w8v")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_5vvyt"]
atlas = ExtResource("2_c4w8v")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_c6i3y"]
atlas = ExtResource("2_c4w8v")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lgr22"]
atlas = ExtResource("3_xwavj")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_trn2v"]
atlas = ExtResource("3_xwavj")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_03owx"]
atlas = ExtResource("3_xwavj")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_wkp8b"]
atlas = ExtResource("3_xwavj")
region = Rect2(192, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_20pc6"]
animations = [{
"frames": [{
"duration": 0.2,
"texture": SubResource("AtlasTexture_20pc6")
}, {
"duration": 0.5,
"texture": SubResource("AtlasTexture_5vvyt")
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_c6i3y")
}],
"loop": false,
"name": &"attack",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lgr22")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_trn2v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_03owx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wkp8b")
}],
"loop": true,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_j4qnp"]
height = 0.5

[sub_resource type="CylinderShape3D" id="CylinderShape3D_c2ibq"]
height = 0.5
radius = 0.4

[sub_resource type="CylinderShape3D" id="CylinderShape3D_5tuhn"]
height = 12.0
radius = 6.0

[node name="Enemy" type="CharacterBody3D" unique_id=1843890749 groups=["enemy"]]
collision_layer = 32
collision_mask = 17
script = ExtResource("1_5uy6h")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." unique_id=1889766085]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.006034851, 0)
shape = SubResource("CapsuleShape3D_uu6xs")
debug_color = Color(0, 0.827451, 0.38431373, 1)

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="." unique_id=945320609]
billboard = 2
texture_filter = 0
sprite_frames = SubResource("SpriteFrames_20pc6")
animation = &"attack"
autoplay = "default"

[node name="EnemyPunchRange" type="Area3D" parent="." unique_id=723035789]
collision_layer = 0
collision_mask = 16
script = ExtResource("4_nenq2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="EnemyPunchRange" unique_id=435938651]
shape = SubResource("CylinderShape3D_j4qnp")
debug_color = Color(0.99215686, 0, 0.23529412, 1)

[node name="AttackDetectionRange" type="Area3D" parent="." unique_id=722716778]
collision_layer = 0
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="AttackDetectionRange" unique_id=1717508467]
shape = SubResource("CylinderShape3D_c2ibq")
debug_color = Color(0.99215686, 0.50980395, 0.23529412, 1)

[node name="PlayerDetectionRange" type="Area3D" parent="." unique_id=229736866]
collision_layer = 0
collision_mask = 16

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlayerDetectionRange" unique_id=320267747]
shape = SubResource("CylinderShape3D_5tuhn")
debug_color = Color(0.99215686, 1, 0.23529412, 1)

[connection signal="body_entered" from="AttackDetectionRange" to="EnemyPunchRange" method="_on_attack_detection_range_body_entered"]
[connection signal="body_exited" from="AttackDetectionRange" to="EnemyPunchRange" method="_on_attack_detection_range_body_exited"]
[connection signal="body_entered" from="PlayerDetectionRange" to="." method="_on_player_detection_range_body_entered"]
[connection signal="body_exited" from="PlayerDetectionRange" to="." method="_on_player_detection_range_body_exited"]
